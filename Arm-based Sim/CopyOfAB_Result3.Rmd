---
title: "Result"
author: "Yicheng Shen"
date: "2023-04-05"
output: pdf_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE, cache = T, warning = F)
library(metafor)
library(tidyverse)
library(kableExtra)
library(latex2exp)
ggplot2::theme_set(ggplot2::theme_bw())
knitr::opts_chunk$set(out.width = "100%", fig.align = 'center')
```

### All bayesian gemtc

```{r}
load("df_indirect_BNMA_AB_bias3.RData")
load("df_direct_BNMA_AB_bias3.RData")
load("df_overall_BNMA_AB_bias3.RData")
```
```{r}
df_indirect_new %>% ggplot() + geom_point(aes(power_het_cor, power_het_eqcor, color = factor(OR_bc))) + 
  geom_abline(slope = 1, intercept = 0, color = "red", linetype = "dashed") 
df_indirect_new %>% ggplot() + geom_point(aes(power_het_cor, power_hom_eqcor, color = factor(OR_bc))) + 
  geom_abline(slope = 1, intercept = 0, color = "red", linetype = "dashed") 
```

```{r}
df_direct_new %>% ggplot() + geom_point(aes(power_het_cor, power_het_eqcor, color = factor(OR_bc))) + 
  geom_abline(slope = 1, intercept = 0, color = "red", linetype = "dashed") 
df_direct_new %>% ggplot() + geom_point(aes(power_het_cor, power_hom_eqcor, color = factor(OR_bc))) + 
  geom_abline(slope = 1, intercept = 0, color = "red", linetype = "dashed") 
```


```{r, fig.height=6}
gridExtra::grid.arrange(
df_BNMA_new %>% ggplot() + geom_point(aes(power_het_cor, power_het_eqcor, color = factor(OR_bc))) + 
  geom_abline(slope = 1, intercept = 0, color = "red", linetype = "dashed") 
,
df_BNMA_new %>% ggplot() + geom_point(aes(power_het_cor, power_hom_eqcor, color = factor(OR_bc))) + 
  geom_abline(slope = 1, intercept = 0, color = "red", linetype = "dashed") 
)

gridExtra::grid.arrange(
df_BNMA_new %>% ggplot() + geom_point(aes(power_het_cor, power_het_eqcor, color = factor(tau))) + 
  geom_abline(slope = 1, intercept = 0, color = "red", linetype = "dashed") 
,
df_BNMA_new %>% ggplot() + geom_point(aes(power_het_cor, power_hom_eqcor, color = factor(tau))) + 
  geom_abline(slope = 1, intercept = 0, color = "red", linetype = "dashed") 
)

gridExtra::grid.arrange(
df_BNMA_new %>% mutate(K = k_ab + k_ac + k_bc) %>% ggplot() + geom_point(aes(power_het_cor, power_het_eqcor, color = K)) + 
  geom_abline(slope = 1, intercept = 0, color = "red", linetype = "dashed") 
,
df_BNMA_new %>% mutate(K = k_ab + k_ac + k_bc) %>% ggplot() + geom_point(aes(power_het_cor, power_hom_eqcor, color = K)) + 
  geom_abline(slope = 1, intercept = 0, color = "red", linetype = "dashed") 
)
```

```{r, fig.height=6}
gridExtra::grid.arrange(
df_BNMA_new %>% ggplot() + geom_point(aes(avg_bias_het_cor, avg_bias_het_eqcor, color = factor(OR_bc))) + 
  geom_abline(slope = 1, intercept = 0, color = "red", linetype = "dashed") 
,
df_BNMA_new %>% ggplot() + geom_point(aes(avg_bias_het_cor, avg_bias_hom_eqcor, color = factor(OR_bc))) + 
  geom_abline(slope = 1, intercept = 0, color = "red", linetype = "dashed") 
)

gridExtra::grid.arrange(
df_BNMA_new %>% ggplot() + geom_point(aes(avg_bias_het_cor, avg_bias_het_eqcor, color = factor(tau))) + 
  geom_abline(slope = 1, intercept = 0, color = "red", linetype = "dashed") 
,
df_BNMA_new %>% ggplot() + geom_point(aes(avg_bias_het_cor, avg_bias_hom_eqcor, color = factor(tau))) + 
  geom_abline(slope = 1, intercept = 0, color = "red", linetype = "dashed") 
)

gridExtra::grid.arrange(
df_BNMA_new %>% mutate(K = k_ab + k_ac + k_bc) %>% ggplot() + geom_point(aes(avg_bias_het_cor, avg_bias_het_eqcor, color = K)) + 
  geom_abline(slope = 1, intercept = 0, color = "red", linetype = "dashed") 
,
df_BNMA_new %>% mutate(K = k_ab + k_ac + k_bc) %>% ggplot() + geom_point(aes(avg_bias_het_cor, avg_bias_hom_eqcor, color = K)) + 
  geom_abline(slope = 1, intercept = 0, color = "red", linetype = "dashed") 
)
```
